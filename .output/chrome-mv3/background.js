var background=function(){"use strict";var l,a;function s(e){return e==null||typeof e=="function"?{main:e}:e}const c=s(()=>{console.log("Background script loaded"),g()});function g(){try{if(typeof globalThis.gtag<"u"){console.log("GA4 already initialized");return}const e="G-DEMO1234567";console.log("Initializing GA4 with measurement ID:",e);const o=document.createElement("script");o.async=!0,o.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,o.onload=()=>console.log("GA4 script loaded successfully"),o.onerror=()=>console.error("Failed to load GA4 script"),document.head.appendChild(o),globalThis.dataLayer=globalThis.dataLayer||[],globalThis.gtag=(...n)=>{globalThis.dataLayer.push(n)},globalThis.gtag("js",new Date),globalThis.gtag("config",e,{client_storage:"localStorage",anonymize_ip:!0,allow_google_signals:!1,send_page_view:!1}),console.log("GA4 configured successfully with localStorage client storage")}catch(e){console.error("Failed to initialize GA4:",e)}}chrome.runtime.onMessage.addListener((e,o,n)=>{if(e.type==="track_event")try{console.log("Tracking event:",e.event_name,e.parameters),typeof globalThis.gtag=="function"?(globalThis.gtag("event",e.event_name,e.parameters),console.log("Event tracked successfully:",e.event_name),n({success:!0})):(console.warn("GA4 not initialized - gtag function not available"),n({success:!1,error:"GA4 not initialized"}))}catch(i){console.error("Error tracking event:",i),n({success:!1,error:i.message})}return!0});function d(){}((a=(l=globalThis.browser)==null?void 0:l.runtime)==null?void 0:a.id)==null?globalThis.chrome:globalThis.browser;function r(e,...o){}const u={debug:(...e)=>r(console.debug,...e),log:(...e)=>r(console.log,...e),warn:(...e)=>r(console.warn,...e),error:(...e)=>r(console.error,...e)};let t;try{t=c.main(),t instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw u.error("The background crashed on startup!"),e}return t}();
background;
